# 个人信息页面 v1.2 追加问题 实现计划

## 版本记录

| 日期 | 版本 | 修改内容 | 修改原因 |
|---|---|---|---|
| 2026-01-14 | v1.0 | v1.2 追加问题实现计划 | 研究报告 v1.2 追加 |
| 2026-01-14 | v1.1 | Phase 1 统一 Header 返回上一页逻辑，保留 onBack 可选 | 需求澄清 |

## 关联研究
[docs/tasks/08-个人信息页面/2026-01-14_个人信息页面_研究报告.md](../../docs/tasks/08-个人信息页面/2026-01-14_个人信息页面_研究报告.md)

## 功能概述
本计划聚焦于“个人信息页面”v1.2 追加部分：
1. 修复 Header 返回按钮无效问题，统一返回上一页。
2. ListMenu 主副标题 props 命名兼容（label/value/title/desc），并支持页面级主副标题对齐方式自定义：
   - “个人中心”页面：主副标题均左对齐
   - “个人信息”页面：label 左对齐，value 右对齐

---


## Phase 1: SubLayout 统一 Header 返回上一页逻辑

### 目标
- SubLayout 统一规定 Header 左侧按钮为“返回上一页”，如未传递 onBack，则自动返回上一页；如传递 onBack，则使用自定义回调。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/layouts/SubLayout.jsx|更新|默认 onBack 返回上一页，保留可选自定义|
|src/pages/my/PersonalInfo.jsx|更新|移除 onBack 传递，保持简洁|
|src/components/Header/index.jsx|查阅/确认|back/onBack 绑定逻辑|

### 具体变更
- SubLayout.jsx：引入 useNavigate，若未传递 onBack，则默认 onBack={() => navigate(-1)}，否则使用 props.onBack。
- PersonalInfo.jsx：移除 onBack 传递。
- Header/index.jsx：确认 back/onBack 绑定逻辑，无需改动。

### 成功标准
- 自动验证：页面无报错，Header 返回按钮点击后返回上一页（或自定义回调）。
- 手动验证：进入个人信息页面，点击返回按钮，页面返回上一页。

---

## Phase 2.1: ListMenu 主副标题 props 兼容

### 目标
- 支持 item.label/item.title，item.value/item.desc 兼容，兼容旧数据结构。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/components/ListMenu/index.jsx|更新|props 兼容实现|

### 具体变更
- 兼容 label/title、value/desc 字段，优先 label/value，无则回退 title/desc。

### 成功标准
- 自动验证：页面无报错，ListMenu 渲染正常。
- 手动验证：兼容旧 title/desc 数据结构。

---

## Phase 2.2: ListMenu 对齐方式 props 支持

### 目标
- 新增 align props，支持 'left'（主副标题均左对齐）、'split'（label 左，value 右）、'custom'（扩展）。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/components/ListMenu/index.jsx|更新|对齐方式 props 支持|
|src/components/ListMenu/index.css|更新|样式支持不同对齐方式|

### 具体变更
- ListMenu/index.jsx：根据 align 渲染不同 flex 布局 class。
- ListMenu/index.css：新增 .list-menu-align-left、.list-menu-align-split 等样式。

### 成功标准
- 自动验证：页面无报错，ListMenu 渲染正常。
- 手动验证：不同 align 参数下主副标题对齐方式正确。

---

## Phase 2.3: 页面级对齐方式传递与验证

### 目标
- my/index.jsx、PersonalInfo.jsx 传递 align 参数，分别实现主副标题左对齐与分列对齐。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/index.jsx|更新|个人中心页面 ListMenu 传递 align="left"|
|src/pages/my/PersonalInfo.jsx|更新|个人信息页面 ListMenu 传递 align="split"|

### 具体变更
- 页面调用处传递 align 参数。

### 成功标准
- 自动验证：页面无报错，ListMenu 渲染正常。
- 手动验证：
  - 个人中心页面 ListMenu 主副标题均左对齐。
  - 个人信息页面 ListMenu label 左、value 右对齐。

---

## Phase 2.4: 兼容性与样式扩展验证

### 目标
- 兼容旧 title/desc 数据结构，样式可扩展，手动/自动验证。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/components/ListMenu/index.jsx|查阅/验证|兼容性检查|
|src/components/ListMenu/index.css|查阅/验证|样式扩展性检查|

### 具体变更
- 检查并验证兼容性与样式扩展性。

### 成功标准
- 自动验证：页面无报错。
- 手动验证：兼容性与样式扩展性满足需求。

---

## Commit message 模板

feat: 个人信息页面 v1.2 追加问题修复

- 修复 Header 返回按钮无效，统一返回上一页
- ListMenu 支持主副标题 props 兼容与对齐方式自定义

## PR 描述要点
- 个人信息页面返回按钮点击后返回上一页
- ListMenu 支持 label/value/title/desc 兼容
- 支持页面级主副标题对齐方式自定义
- 兼容旧数据结构，样式可扩展

---
