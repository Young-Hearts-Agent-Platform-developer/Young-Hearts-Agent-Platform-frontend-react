# 首页制作与导航 实现计划

## 版本记录

| 日期 | 版本 | 修改内容 | 修改原因 |
|---|---|---|---|
| 2026-01-12 | v1.0 | 初始计划 | 基于研究报告与设计文档 |
| 2026-01-12 | v1.1 | Phase 1/3 结构与样式调整 | 适配顶部导航栏“首页”标题、本地 logo 图标、副标题需求 |
| 2026-01-12 | v1.2 | 细化主副入口卡片、无障碍、底部导航栏、全局样式等 | 融合设计文档与研究报告细节，补充Phase 2 |

## 关联研究
[docs/tasks/02-首页制作与导航/2026-01-12_首页制作与导航_研究报告.md](docs/tasks/02-首页制作与导航/2026-01-12_首页制作与导航_研究报告.md)

## 功能概述

实现“首页”页面，原则如下：
- 以现有组件和页面骨架为基础，通过组合、样式适配、props/className等方式实现首页及导航相关需求。
- 仅在必要时对组件进行克制性扩展（如增加props），不做结构性重构。
- 主副入口卡片直接调用现有Card组件，logo区允许重新设计。
- 无障碍、响应式、跳转等通过外部包装和样式适配实现。
动画暂不实现，仅预留注释与结构。空态/加载态/错误反馈占位区域按设计稿标准实现。


## Phase 1: 基础页面与路由结构搭建

### 目标
- 建立首页主目录与基础路由，布局骨架分区明确，严格对齐设计稿结构。
- 顶部导航栏仅显示“首页”标题，logo、本地图片与主副标题仅在内容区上半部分居中展示，下半部分为卡片入口。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/home/index.jsx|新增/修改|首页主页面实现，内容区结构优化|
|src/layouts/HomeLayout.jsx|新增/修改|首页整体布局骨架，支持顶部导航栏与内容区分区|
|src/assets/app_icon.png|引用|应用 logo 图标|

### 具体变更
1. Header 组件顶部导航栏仅显示“首页”标题，不显示 logo。
2. logo 图标、本地图片、主标题“心青年智能体平台”、副标题“陪伴·成长·互助”仅在内容区上半部分居中展示。
3. 下半部分为主副入口卡片。
4. 响应式布局优化，保证 logo、标题、副标题在不同屏幕下均居中显示。

#### 代码片段示例
```jsx
// src/components/Header/index.jsx
export default function Header() {
  return (
    <header className="home-header">
      <div className="nav-title">首页</div>
    </header>
  );
}
```
> 顶部导航栏仅显示“首页”标题，logo、主副标题移至内容区。

### 成功标准
- 自动验证：访问 `/` 正常渲染首页骨架，无报错。
- 手动验证：顶部导航栏显示“首页”标题，logo、主副标题居中，响应式布局与设计稿一致。

---

## Phase 2: 主副入口卡片组合与适配

### 目标
- 直接调用现有Card组件，通过props/className/外部包装实现主入口（智能体咨询）与副入口（查资料、找帮手）卡片。
- 响应式布局，移动端主副卡片并排，PC端主卡左、副卡右垂直堆叠。
- 仅在必要时对Card组件做克制性扩展（如增加aria-label、tabIndex等props）。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/home/index.jsx|组合/适配|首页主副入口卡片组合与布局|
|src/components/Card/index.jsx|必要时扩展|如需支持无障碍/多状态，仅增加必要props，不做结构性调整|
|src/components/Card/index.css|样式适配|主副卡片样式区分、响应式|

### 具体变更
1. 首页直接组合调用Card组件，分别传入主副入口所需文案、图标、样式class。
2. 响应式布局通过外部容器和className实现。
3. 如需无障碍/多状态，仅在Card组件增加必要props（如aria-label、tabIndex），不做结构性调整。
4. 动效仅预留注释。

#### 代码片段示例
```jsx
// src/pages/home/index.jsx
<Card type="main" icon="message" text="智能体咨询" className="main-card" />
<Card type="sub" icon="book" text="查资料" className="sub-card" />
<Card type="sub" icon="users" text="找帮手" className="sub-card" />
```

### 成功标准
- 自动验证：页面渲染无报错。
- 手动验证：主副入口卡片样式、无障碍属性、响应式布局与设计稿一致。

---

## Phase 3: Logo区与底部导航栏组合实现

### 目标
- Logo区允许重新设计，主副标题、本地logo图片通过HomeLayout或首页内容区组合实现。
- 顶部导航栏、底部导航栏直接调用现有Header、BottomNav组件，通过外部props/className适配。
- 无障碍、响应式通过外部包装和样式实现。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/home/index.jsx|组合/适配|Logo区、主副标题、logo图片组合实现|
|src/layouts/HomeLayout.jsx|组合/适配|内容区分区，logo区与卡片区分离|
|src/components/Header/index.jsx|适配|如需，仅通过props/className适配首页标题|
|src/components/BottomNav/index.jsx|适配|底部导航栏直接调用，主色高亮|
|src/assets/app_icon.png|引用|应用 logo 图标|

### 具体变更
1. Logo区（logo图片+主副标题）在HomeLayout或首页内容区单独实现，允许自定义结构和样式。
2. Header组件仅显示“首页”标题，如需适配通过props/className实现。
3. BottomNav直接调用，主色高亮、安全区适配。
4. 响应式、无障碍通过外部包装和样式实现。

#### 代码片段示例
```jsx
// src/pages/home/index.jsx
<Header title="首页" />
<div className="logo-block">
  <img src={appIcon} alt="logo" className="home-logo-img" />
  <div className="home-title">心青年智能体平台</div>
  <div className="home-subtitle">陪伴·成长·互助</div>
</div>
```

### 成功标准
- 自动验证：页面渲染无报错。
- 手动验证：Logo区、主副标题、底部导航栏样式、响应式与设计一致，无障碍属性齐全。

---



## Phase 4: 跳转逻辑与交互实现

### 目标
- 通过外部包装和事件，组合现有Card组件实现主副入口卡片的点击跳转，无需修改Card组件内部结构。
- 路由跳转、无障碍、键盘可达通过外部实现。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/home/index.jsx|组合/适配|主副入口卡片onClick跳转逻辑|
|src/router/index.jsx|完善|完善路由配置，支持懒加载|
|src/pages/consultation/index.jsx|新增|主入口跳转占位页|
|src/pages/knowledge/index.jsx|新增|副入口跳转占位页|
|src/pages/community/index.jsx|新增|副入口跳转占位页|

### 具体变更
1. 首页通过onClick/onKeyDown等事件包装Card组件，实现点击/键盘跳转。
2. 路由跳转用useNavigate，支持键盘可达、aria-label、tabIndex等。
3. 路由配置完善，支持懒加载，404兜底。

#### 代码片段示例
```jsx
// src/pages/home/index.jsx
import { useNavigate } from 'react-router-dom';
// ...
const navigate = useNavigate();
<Card onClick={() => navigate('/consultation')} aria-label="智能体咨询" tabIndex={0} />
<Card onClick={() => navigate('/knowledge')} aria-label="查资料" tabIndex={0} />
<Card onClick={() => navigate('/community')} aria-label="找帮手" tabIndex={0} />
```

### 成功标准
- 自动验证：点击卡片路由跳转无误。
- 手动验证：跳转目标页面正确，交互无障碍，键盘可达。

---




## Phase 5: 空态/加载态/错误反馈占位（外部实现）

### 目标
- 通过外部包装和占位区，在首页或内容区实现空态/加载态/错误反馈，无需修改Card组件内部结构。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/home/index.jsx|占位/适配|空态/加载态/错误反馈占位区|

### 具体变更
1. 在首页内容区预留 `<div className="empty-state-placeholder" />`、`<div className="loading-placeholder" />`、`<div className="error-placeholder" />`，并加注释。
2. 加载态、空态、错误态样式、文案、无障碍属性通过外部实现。
3. Card组件无需调整。

#### 代码片段示例
```jsx
// src/pages/home/index.jsx
{loading && <div className="loading-placeholder"><Spinner />加载中...</div>}
{error && <div className="error-placeholder">出错了，请重试</div>}
{empty && <div className="empty-state-placeholder">暂无内容</div>}
```

### 成功标准
- 自动验证：占位区域渲染无报错。
- 手动验证：占位区域样式、文案、结构与设计一致，无障碍属性齐全。

---




## Phase 6: 全局样式与无障碍适配（外部适配）

### 目标
- 通过全局样式变量、外部className、props等方式，统一色彩、圆角、对比度，确保可访问性。
- 仅在必要时对组件增加无障碍相关props，不做结构性调整。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/styles/variables.css|适配|主色、圆角、阴影、辅助色、禁用色、对比度变量|
|src/pages/home/index.jsx|适配|主副入口卡片、底部导航栏等无障碍属性通过外部实现|

### 具体变更
1. 统一主色 `#4A90E2`，圆角 `8px`，阴影、对比度、禁用色、辅助色、背景色、文本色等，变量命名如 `--color-primary`、`--radius-md`、`--shadow-card`、`--color-disabled`、`--color-secondary`。
2. 主副入口卡片、底部导航栏等组件通过外部className/props适配全局变量和无障碍属性。
3. 仅在必要时对组件增加aria-label、tabIndex等props。
4. 对比度检查：正文与背景 ≥ 4.5:1，按钮文字与主色背景通过 WCAG 检查。
5. 响应式断点、字体、行高、触控目标尺寸等全局规范。

#### 验证命令
- 样式lint：`npm run lint:css`
- a11y 检查：推荐使用 axe、lighthouse 等工具

### 成功标准
- 自动验证：样式lint、a11y检查通过。
- 手动验证：对比度、键盘可达性、无障碍属性、响应式布局符合设计。

---

## PR Commit Message 模板

feat: 首页制作与导航基础实现

- 完成首页分区布局、主副入口卡片、Logo区与底部导航栏
- 支持主副入口卡片点击跳转，无动画
- 预留空态/加载态/错误反馈占位
- 响应式与无障碍适配

## 版本记录

| 日期 | 版本 | 修改内容 | 修改原因 |
|---|---|---|---|
| 2026-01-12 | v1.0 | 初始计划 | 基于研究报告与设计文档 |
