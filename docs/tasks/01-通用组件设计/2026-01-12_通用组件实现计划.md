# 通用组件实现计划

## 计划日期

2026-01-12

## 关联研究

docs/tasks/01-通用组件设计/2026-01-12_通用组件设计_研究报告.md

## 功能概述

实现“心青年”智能体平台前端项目的通用头部（Header）、底部导航栏（BottomNav）组件及其布局（HomeLayout/SubLayout），并在首页、个人中心等页面集成，满足响应式、无障碍、风格统一等要求。

## 技术方案摘要

- 基于 Ant Design Mobile 组件二次封装，统一主色、圆角、动效、无障碍。
- 头部/底部组件 props 结构灵活，右侧操作区由各页面自定义。
- 每个通用组件目录下提供 README.md，记录 props、用法、注意事项。
- 布局组件（HomeLayout/SubLayout）负责组合头部、底部与主内容区。

---

## Phase 1: 通用头部与底部导航组件

### 目标

实现 Header、BottomNav 组件，基于 Ant Design Mobile 封装，支持主色、响应式、无障碍，props 灵活。

### 修改文件清单

|文件路径|修改类型|说明|
|---|---|---|
|src/components/Header/index.jsx|新增|头部组件实现|
|src/components/Header/README.md|新增|props、用法说明|
|src/components/BottomNav/index.jsx|新增|底部导航栏实现|
|src/components/BottomNav/README.md|新增|props、用法说明|
|src/styles/variables.css|新增|主色、圆角等变量|

### 具体变更（示例）

#### 1. Header 组件
- 基于 Ant Design Mobile NavBar 封装，支持 title、subtitle、showBack、rightActions、children。
- 主色、圆角、字体等通过 CSS 变量统一。

#### 2. BottomNav 组件
- 基于 Ant Design Mobile TabBar 封装，tabs 固定为“首页”“我的”，支持 icon、label、route、activeKey、onTabChange、safeArea。

#### 3. 组件文档
- 每个组件目录下新增 README.md，props 表、用法示例、注意事项。

### 成功标准
- 自动验证：
    - `npm run lint` 通过
    - `npm run build` 通过
- 手动验证：
    - 组件在 Storybook 或页面中可正常渲染、交互、切换
    - props 说明文档齐全

---

## Phase 2: 页面布局组件实现

### 目标

实现 HomeLayout（一级页面）、SubLayout（次级页面）布局组件，组合头部、底部与主内容区。

### 修改文件清单

|文件路径|修改类型|说明|
|---|---|---|
|src/layouts/HomeLayout.jsx|新增|一级页面布局|
|src/layouts/SubLayout.jsx|新增|次级页面布局|
|src/layouts/README.md|新增|布局用法说明|

### 具体变更（示例）
- HomeLayout：顶部为 Header（Logo/标题），底部为 BottomNav，主内容区为 children。
- SubLayout：顶部为 Header（带返回），无底部导航，主内容区为 children。

### 成功标准
- 自动验证：
    - `npm run lint` 通过
    - `npm run build` 通过
- 手动验证：
    - 布局组件可包裹业务页面，头部/底部渲染正确
    - README.md 说明齐全

---

## Phase 3: 页面集成与样式统一

### 目标

在首页、个人中心等一级/次级页面集成通用组件，统一主色、圆角、动效。

### 修改文件清单

|文件路径|修改类型|说明|
|---|---|---|
|src/pages/home/index.jsx|修改|集成 HomeLayout、Header、BottomNav|
|src/pages/my/index.jsx|修改|集成 HomeLayout、Header、BottomNav|
|src/pages/knowledge/index.jsx|修改|集成 SubLayout、Header|
|src/styles/variables.css|修改|如需补充主题变量|

### 具体变更（示例）
- 替换原有页面头部/底部为通用组件
- 主色、圆角、动效等样式统一

### 成功标准
- 自动验证：
    - `npm run lint` 通过
    - `npm run build` 通过
- 手动验证：
    - 页面头部、底部风格统一，交互正常
    - 响应式、无障碍体验良好

---

## Phase 4: 自动化测试与文档补充

### 目标

补充通用组件的单元测试、交互测试，完善 README.md 文档。

### 修改文件清单

|文件路径|修改类型|说明|
|---|---|---|
|src/components/Header/Header.test.jsx|新增|头部组件测试|
|src/components/BottomNav/BottomNav.test.jsx|新增|底部导航测试|
|src/layouts/HomeLayout.test.jsx|新增|布局测试|
|src/layouts/SubLayout.test.jsx|新增|布局测试|

### 具体变更（示例）
- 覆盖 props、交互、无障碍等测试
- 检查文档完整性

### 成功标准
- 自动验证：
    - `npm run test` 通过
    - `npm run lint` 通过
- 手动验证：
    - 组件文档齐全，开发者可查阅

---

## 风险和缓解措施

|风险|可能性|影响|缓解措施|
|---|---|---|---|
|AntD Mobile 升级或 API 变动|中|中|封装层隔离，升级时集中适配|
|页面自定义右侧操作区复杂|中|中|props 透传，文档示例丰富|
|响应式/安全区兼容性|低|中|多端手动验收，补充样式变量|

## 回滚方案
- 保留原页面实现，回退组件引用即可
- 组件变更可通过 git revert 撤销

## 后续优化（非本次范围）
- 支持主题切换、国际化（如后续有需求）
- Storybook 组件库自动化集成

---

# 生成文件名
2026-01-12_通用组件实现计划.md
