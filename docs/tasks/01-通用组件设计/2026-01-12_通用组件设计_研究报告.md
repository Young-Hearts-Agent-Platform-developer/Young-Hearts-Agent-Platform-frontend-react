# 通用组件设计 研究报告

## 研究日期

2026-01-12

## 研究问题

研究并设计该前端项目的通用组件（如一次、次级页面的头部，以及底部导航栏）。


## 发现摘要

- 项目采用模块化目录结构，通用组件应放于 src/components/，页面布局相关组件建议放于 src/layouts/。
- 一级页面（首页、个人中心）采用固定底部导航栏（Bottom Navigation），头部为品牌 Logo 或页面标题，无返回按钮，底部栏仅含“首页”“我的”两项，Tab 固定。
- 次级页面（如详情页、专家墙、知识库等）采用顶部 Header，左侧为返回按钮，中间为页面标题，右侧可选操作，无底部导航栏。
- 头部组件需支持：主标题、副标题、返回按钮（次级页）、右侧操作区（如设置、编辑等），样式简洁、主色突出，兼容无障碍。
- 底部导航栏需支持：主 Tab 固定、图标+标签、激活高亮、无障碍、移动端安全区适配，且仅一级页面展示。
- 设计需严格遵循“理性的温暖”风格，主色#4A90E2，圆角、阴影、动效、无障碍等规范，避免高刺激色与复杂动效。
- 不需要多主题切换、国际化、TabBar 动态配置。

## 相关文件清单

|文件路径|作用说明|关键行号|
|---|---|---|
|docs/“心青年”智能体平台-前端-项目结构.md|项目结构与目录规范|L1-L100|
|docs/page-designs/首页-页面设计.md|首页头部、底部导航设计细节|L1-L100|
|docs/page-designs/个人中心-页面设计.md|个人中心头部、底部导航、交互规范|L1-L96|
|docs/page-designs/知识库大厅-页面设计.md|知识库大厅头部、底部导航、结构图|L1-L40|
|docs/page-designs/知识详情页-页面设计.md|次级页头部（带返回）、内容区规范|L1-L40|
|docs/page-designs/专家墙-页面设计.md|次级页头部（带返回）、内容区规范|L1-L40|


## 当前实现分析

- src/components/ 目录下暂无现成 Header、BottomNav 等通用组件实现，需新建。
- src/layouts/ 适合放置页面级布局组件，如 HomeLayout（含底部栏）、SubLayout（含顶部返回栏）。
- 一级页面（首页/个人中心）头部为品牌 Logo 或页面标题，无返回按钮，底部导航栏常驻，Tab 固定。
- 次级页面头部为带返回按钮的 Header，右侧可扩展操作按钮，无底部导航栏。
- 页面设计文档和界面设计方案对头部、底部导航的结构、样式、动效、无障碍等有详细描述。


### 核心流程

```
[一级页面（首页/个人中心）]
┌────────────────────┐
│ Header（Logo/标题）│
├────────────────────┤
│ Main/Body          │
├────────────────────┤
│ BottomNav（固定）  │
└────────────────────┘

[次级页面（功能/详情等）]
┌────────────────────┐
│ Header（带返回）    │
├────────────────────┤
│ Content            │
└────────────────────┘
```


### 关键代码片段

- 头部组件（Header）
  - props: title, subtitle, showBack, rightActions, style
  - showBack: 是否显示返回按钮（次级页面专用）
  - rightActions: 右侧操作区（如设置、筛选、分享等）
  - 支持 children/slot 扩展
- 底部导航栏（BottomNav）
  - props: tabs([{icon, label, route}]), activeKey, onTabChange, safeArea
  - tabs 固定为“首页”“我的”，icon、label、route 均为常量
  - 仅一级页面展示，Tab 切换不堆栈
  - 支持安全区适配、无障碍 aria 属性


## 架构洞察

- 通用组件需与 Ant Design Mobile 风格兼容，主色#4A90E2，圆角、阴影、动效统一。
- 头部、底部导航栏建议以函数式组件实现，支持自定义样式与插槽。
- 推荐将页面布局（含头部、底部）抽象为 HomeLayout（一级页面）、SubLayout（次级页面），便于复用。
- 头部返回按钮需实现 history.back()，无历史栈时兜底跳转首页。
- 底部导航栏仅一级页面展示，Tab 固定，切换不堆栈。


## 潜在风险和边缘情况

- 需兼容 PC/H5 响应式，安全区适配（如 iOS 底部）。
- TabBar 激活态、禁用态、无障碍（aria）需覆盖。
- 头部右侧操作区需支持自定义内容。
- 主题色、圆角、阴影等需全局统一。
- 一级页面头部如为 Logo 区，需支持自定义内容（如首页特殊布局）。


## 已确认需求与限制

- 不需要多主题切换。
- 不需要国际化。
- TabBar（BottomNav）不需要动态配置/权限控制。


## 参考资料

- Ant Design Mobile 官方文档
- 项目 docs/page-designs/ 各页面设计稿
- docs/“心青年”智能体平台-前端-项目结构.md
- docs/“心青年”智能体平台-前端界面设计方案.md
