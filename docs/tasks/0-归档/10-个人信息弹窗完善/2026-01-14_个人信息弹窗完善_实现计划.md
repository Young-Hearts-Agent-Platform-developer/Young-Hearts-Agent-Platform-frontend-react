# 个人信息弹窗完善 实现计划

## 版本记录

| 日期 | 版本 | 修改内容 | 修改原因 |
|---|---|---|---|
| 2026-01-14 | v1.0 | 初始计划 | 基于研究报告与澄清答复 |

## 关联研究
[docs/tasks/10-个人信息弹窗完善/2026-01-14_个人信息弹窗完善_研究报告.md](docs/tasks/10-个人信息弹窗完善/2026-01-14_个人信息弹窗完善_研究报告.md)

## 功能概述
完善“个人信息”页面弹窗，修复 antd-mobile Modal 组件按钮不显示问题，优化控件渲染兜底逻辑，预留扩展接口。邮箱验证本次不实现，弹窗按钮按默认风格。

---

## Phase 1: 修正 Modal 弹窗按钮渲染

### 目标
将原 confirmText/cancelText/onConfirm/onCancel 等 props 替换为 actions 数组，兼容 antd-mobile 5.x，确保弹窗按钮正常显示。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/PersonalInfo.jsx|更新|Modal 组件弹窗按钮配置|

### 具体变更
- 替换 Modal 组件按钮相关 props 为 actions 数组，参考官方文档。
- actions 配置“取消”“确认”按钮，loading 状态下禁用。

### 成功标准
- 自动验证：页面无报错，弹窗按钮正常显示。
- 手动验证：点击可编辑字段弹窗，按钮区显示“取消”“确认”，交互正常。

---

## Phase 2: 优化控件渲染兜底逻辑

### 目标
完善 renderEditInput，未识别字段类型时显示提示或禁用控件，避免渲染为 null。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/PersonalInfo.jsx|更新|控件渲染兜底处理|

### 具体变更
- renderEditInput 增加 default fallback，未识别类型时显示“暂不支持该字段类型”。

### 成功标准
- 自动验证：页面无报错。
- 手动验证：如遇未知字段类型，弹窗显示兜底提示。

---

## Phase 3: 预留扩展接口（多选/日期/邮箱验证）

### 目标
在字段配置与控件渲染逻辑中预留扩展接口，便于后续支持多选、日期、邮箱验证等。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/PersonalInfo.jsx|更新|字段配置与控件渲染预留扩展|

### 具体变更
- 字段配置注释支持 type: 'multi-select'、'date'、'verify' 等。
- renderEditInput 结构预留 switch/case 分支。

### 成功标准
- 自动验证：页面无报错。
- 手动验证：代码结构清晰，便于后续扩展。

---

## Phase 4: 联调与验证

### 目标
确保弹窗功能完整，交互与控件渲染无误。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/PersonalInfo.jsx|联调|整体功能验证|

### 具体变更
- 联调弹窗与控件渲染，确保各分支逻辑无误。

### 成功标准
- 自动验证：无报错、无警告。
- 手动验证：弹窗按钮、控件渲染、关闭/确认交互均正常。

---

## PR 提交模板
- commit message：fix: 完善个人信息弹窗，兼容 antd-mobile 5.x Modal 按钮
- PR 描述要点：修复弹窗按钮不显示问题，优化控件渲染兜底，预留扩展接口，交互按默认风格

## 版本记录

| 日期 | 版本 | 修改内容 | 修改原因 |
|---|---|---|---|
| 2026-01-14 | v1.0 | 初始计划 | 基于研究报告与澄清答复 |
