# 孤独症专业资料知识库RAG切片策略选型指南
针对孤独症专业资料的RAG切片策略，核心原则是**语义完整性优先、结构优先、风险可控、颗粒度匹配用户需求**，绝对不能用通用的一刀切方案。孤独症知识库的资料具有强专业属性、高合规风险、强上下文依赖、结构层级清晰的特点，切片策略必须围绕这些核心特性定制，避免断章取义导致的干预误用、诊断偏差等严重问题。

## 一、选型前置：先完成知识库分类与风险分级
切片策略的核心是“因材施教”，先对全量资料做标准化分类与风险分级，这是所有切片动作的前提，禁止全库使用统一切片规则。
### 1. 资料分类（按内容属性）
| 资料类别 | 典型内容 | 核心特性 |
|----------|----------|----------|
| 高权威规范类 | DSM-5/ICD-11诊断标准、中国孤独症康复指南、专家共识、用药规范、标准化评估量表（VB-MAPP/PEP-3等） | 强结构、高风险、强上下文依赖，术语高度统一，绝对不允许拆分核心条目 |
| 循证研究类 | 学术论文、Meta分析、临床研究报告、干预方法循证等级说明 | 结构固定（摘要/方法/结果/结论）、强逻辑关联，结论高度依赖研究前提 |
| 实操方案类 | 康复训练手册、干预方法详解、居家干预步骤、特教实操指南 | 步骤化、场景化，方法与适用人群/禁忌强绑定，拆分后易误用 |
| 科普宣教类 | 家长手册、常见问题FAQ、科普文章、公益讲座实录 | 口语化、颗粒度灵活，多为单点问题解答，用户以家长为主 |
| 案例类 | 临床干预案例、居家康复案例、问题行为解决案例 | 场景化强，背景-过程-结果强关联 |

### 2. 风险分级（按安全优先级）
- **高风险级**：诊断标准、用药规范、量表评估标准、干预禁忌与适应症（100%保证语义和结构完整，禁止随意拆分）
- **中风险级**：干预方案、训练手册、循证研究报告（保证方法+适用场景+注意事项完整绑定）
- **低风险级**：科普内容、家长FAQ、案例分析（可灵活调整颗粒度，优先匹配用户查询习惯）

## 二、核心切片策略选型与场景适配
先明确各主流切片策略在孤独症场景的适用性，再给出分场景的首选方案，**绝对禁止以固定长度切片作为主策略**。

### 1. 主流切片策略适配性对比
| 切片策略 | 核心原理 | 孤独症场景适用性 | 首选使用场景 | 核心禁忌 |
|----------|----------|------------------|--------------|----------|
| 基于结构的切片 | 按文档原生层级（标题/章节/段落/列表/表格）拆分，以完整结构单元为切片边界 | ★★★★★ 核心首选 | 高风险规范类、中风险实操/研究类全量文档 | 禁止破坏原生标题层级，禁止拆分完整表格、诊断条目、量表维度 |
| 混合分层切片（结构+语义） | 先按结构切大的父块，再按语义连贯性切子块，保留父子层级关联 | ★★★★★ 全场景首选 | 中风险实操/研究类、混合结构的复合文档 | 禁止子块拆分后丢失父块的核心前提（如适用人群、禁忌） |
| 基于语义的切片 | 通过领域嵌入模型判断语义边界，按语义主题连贯性拆分 | ★★★★ 辅助补充 | 低风险科普/案例类、无明确结构的讲座/访谈实录 | 禁止用通用嵌入模型，禁止拆分孤独症专业术语与对应定义 |
| 固定长度切片 | 按固定token/字符数拆分，搭配重叠率 | ★☆☆☆☆ 不推荐主用 | 仅无结构的零散纯文本、无专业属性的补充内容 | 绝对禁止用于高/中风险文档，禁止在句子/专业术语中间拆分 |
| 句子/段落切片 | 按自然段落、句子标点拆分 | ★★☆☆☆ 仅辅助 | 短科普、单点FAQ | 禁止单独使用，易导致切片过碎、上下文丢失 |

### 2. 分风险等级的定制化切片方案
#### （1）高风险级文档：严格结构切片，零语义断裂
**核心目标**：保证核心规范的100%完整，杜绝断章取义，这是孤独症知识库的底线。
- 切片规则：
  1.  完全遵循文档原生标题层级拆分，最小切片单元为**三级标题对应的完整小节**，禁止跨标题拆分。例：DSM-5的“A类社会交往障碍”完整小节为一个切片，禁止将A1、A2诊断条目拆分到不同切片。
  2.  强制绑定规则：同一个诊断条目、同一个量表维度、同一个用药规范的「适应症+禁忌症+不良反应」、同一个干预方法的「核心禁忌」，必须完整放在同一个切片内，不允许拆分。
  3.  长度控制：最小切片不低于100token，最大不超过1024token（适配主流嵌入模型窗口）；若单小节内容超长，仅可按子小节拆分，绝对禁止在句子中间截断。
  4.  特殊处理：完整表格、量表评分标准必须整体作为一个切片，或与对应说明文字绑定在同一个切片，禁止拆分表格的行/列。
  5.  重叠设置：边界重叠率固定20%，且必须为完整句子/段落，避免边界内容丢失。

#### （2）中风险级文档：混合分层切片，上下文强绑定
**核心目标**：兼顾召回精准度与语义完整性，保证干预方法、研究结论的前提不丢失。
- 切片规则：
  1.  第一步（父块切分）：按文档原生结构切分大颗粒父块，例：论文的「研究对象+干预方法+核心结论」、训练手册的「方法原理+适用人群+操作步骤+注意事项」为一个父块，父块大小控制在512-2048token。
  2.  第二步（子块切分）：对父块按语义主题做细粒度拆分，例：将“操作步骤”父块按独立操作单元拆分为子块，子块大小控制在128-512token，重叠率10%-15%。
  3.  强制规则：子块必须挂载父块的核心元信息（所属干预方法、适用年龄、证据等级），召回时采用「子块召回+父块补全」的模式，避免只召回操作步骤、丢失适用人群与禁忌。
  4.  特殊处理：循证研究的「核心结论+证据等级+适用人群」必须绑定在同一个切片，禁止拆分结论与前提条件。

#### （3）低风险级文档：语义切片为主，匹配用户查询习惯
**核心目标**：提升短查询的召回匹配度，兼顾科普内容的易读性。
- 切片规则：
  1.  先按段落/标题做粗切，再用**孤独症领域微调的嵌入模型**做语义细切，保证每个切片为一个完整的主题单元（如一个问题+完整答案、一个完整案例场景）。
  2.  长度控制：切片大小64-512token，适配家长、新手用户的短查询习惯，重叠率5%-10%。
  3.  特殊处理：FAQ类内容，单个「问题+答案」必须作为一个完整切片，禁止拆分；案例类内容，「案例背景+干预过程+结果」为一个父块，可按干预阶段拆分子块，保留完整场景关联。

## 三、进阶优化：孤独症场景专属切片增强策略
### 1. 专业术语锚定切片
先搭建孤独症专业术语词典（含ABA、VB-MAPP、DIR、SCERTS等专有名词、缩写、定义），切片时执行强制规则：
- 专业术语与其首次出现的定义、适用场景必须放在同一个切片，禁止拆分术语与定义；
- 切片中出现专业术语时，自动打上实体标签，召回时可关联对应的完整定义切片，避免术语理解偏差。

### 2. 多维度元信息标注（切片效果的核心加分项）
给每个切片补充标准化元信息，不仅能优化召回精准度，还能规避风险，强制标注字段如下：
- 基础属性：文档类型、风险等级、发布机构、发布时间、证据等级（A级循证/专家共识/科普等）
- 适用属性：目标用户（医生/康复师/家长/特教）、适用年龄（0-3岁/3-6岁/6-12岁等）
- 主题属性：核心分类（诊断/干预/评估/居家训练/社交/语言/行为管理）

### 3. 父子块分层召回机制
这是孤独症RAG的核心优化点，完美解决“切片太碎丢失上下文、切片太大召回不精准”的矛盾：
- 存储时：仅对子块做向量嵌入与索引，父块与子块做强关联绑定；
- 召回时：先通过用户查询匹配最相关的子块，再自动挂载对应的完整父块内容，一起传入大模型生成回答；
- 优势：既保证了召回的精准度，又给大模型提供了完整的上下文，彻底避免断章取义导致的干预方法误用。

## 四、落地验证：切片策略的迭代优化
没有万能的切片策略，必须基于孤独症场景的真实用户查询做持续验证与迭代，核心步骤如下：
1.  **构建验证集**：收集真实用户查询，分为4类核心场景：事实类（诊断标准）、实操类（居家干预方法）、对比类（不同干预方法差异）、风险类（用药/禁忌相关）；
2.  **核心评估指标**：除通用的召回率、精准率外，必须新增孤独症专属指标：
    - 语义完整性：召回切片是否包含完整的前提条件、适用范围、禁忌内容；
    - 风险合规性：高风险内容是否完整，无拆分、无断章取义；
    - 业务准确率：生成的回答是否符合临床规范，无错误引导；
3.  **迭代优化**：针对召回错误、回答偏差的案例，回溯切片问题，调整切片颗粒度、边界规则、重叠率，优化元信息标注，持续适配用户的真实查询需求。

## 五、避坑指南：孤独症场景最易踩的5个致命错误
1.  **全库统一固定长度切片**：这是最常见的致命错误，极易拆分专业条目、干预步骤与禁忌，导致断章取义，带来医疗风险；
2.  **过度追求小切片，牺牲语义完整性**：为了提升召回率，把切片切得过碎，导致干预方法与适用人群、禁忌拆分，用户拿到的信息不完整，极易误用；
3.  **用通用嵌入模型做语义切片**：通用模型对孤独症专业术语的语义理解不足，极易出现切分错误，必须使用领域微调的嵌入模型；
4.  **忽略表格、量表的结构化处理**：拆分表格、量表条目，导致评估标准、诊断条目不完整，引发诊断、评估偏差；
5.  **无风险分级，一刀切处理**：高风险的诊断、用药内容与低风险科普用同一套切片规则，无法保证高风险内容的完整性与合规性。