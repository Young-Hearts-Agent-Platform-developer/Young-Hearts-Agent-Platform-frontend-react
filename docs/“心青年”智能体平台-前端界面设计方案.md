# “心青年”智能体平台-前端界面设计方案

## 版本记录
| 日期 | 版本 | 修改人 | 修改摘要 |
|---|---|---|---|
| 2026-01-11 | v1.0 | 架构师 | 初始版本创建：定义设计风格、梳理RAG咨询流与统一服务中心路由结构。 |
| 2026-01-11 | v1.1 | 架构师 | **结构重构**：定义一级/次级页面导航规则；首页采用“Logo+1+2”布局；收敛统一服务中心入口至个人中心。 |
| 2026-01-12 | v1.2 | 架构师 | **查漏补缺**：根据功能文档补充缺失页面（注册分流、公共展示页、审核详情、运维监控等）。 |
| 2026-01-13 | v1.3 | 架构师 | 将统一服务中心入口移至首页，新增“暖心服务站”容器；调整首页与服务中心流转说明。 |
| 2026-01-13 | v1.4 | 架构师 | 将“统一服务中心”由独立概览页改为首页内嵌容器，更新首页、服务中心小节与流程图。 |

## 1. 设计概述

### 1.1 设计理念
**“理性的温暖 (Rational Warmth)”**
针对孤独症家庭（患者家属）及专业服务者，设计需平衡“情感抚慰”与“专业效率”。
- **无障碍与低刺激**：避免高饱和度色彩和剧烈动效，为潜在的心青年用户或处于焦虑状态的家属提供视觉安抚。
- **清晰的认知负荷**：信息层级扁平化，关键操作（如“立即咨询”）零门槛触达。
- **信任感构建**：在 AI 生成内容与专家建议展示上，通过严谨的 UI 布局（引用角标、专家卡片）强化权威性。

### 1.2 风格关键词
- **Calm (静谧)**：使用低对比度、柔和的界面语言，减少焦虑。
- **Reliable (可信)**：通过结构化的数据展示（如引用来源清晰可见）建立信任。
- **Accessible (包容)**：大字体、高易读性，符合 WCAG 无障碍标准。

### 1.3 色彩系统
| 颜色用途 | 建议色值 (HEX) | 描述 |
|---|---|---|
| **主色 (Primary)** | `#4A90E2` (静谧蓝) | 用于主按钮、关键链接，传递专业与冷静。 |
| **辅助色 (Secondary)** | `#50E3C2` (疗愈绿) | 用于成功状态、正面反馈、志愿者标识。 |
| **强调色 (Accent)** | `#F5A623` (暖阳橙) | 仅用于“需注意”提示、紧急状态或暖心引导。 |
| **背景色 (Background)** | `#F4F6F8` (云雾灰) | 用于页面底色，避免纯白刺眼。 |
| **文本色 (Text)** | `#2C3E50` (深灰蓝) | 主文本色，避免纯黑，柔和阅读体验。 |

---

## 2. 页面导航与布局规范

本系统采用**双层级导航结构**，严格区分一级页面与次级页面。

### 2.1 一级页面 (Level 1 Pages)
*   **适用范围**：仅限 `首页` 和 `个人中心`。
*   **头部 (Header)**：展示页面标题（“心青年”智能体平台 / 个人中心）。部分场景（如首页）可自定义为 Logo 展示区。无关返回按钮。
*   **底部 (Bottom Navigation)**：固定展示，用于在两个一级页面间切换。
*   **菜单项**：
    1.  **首页** (Home)
    2.  **我的** (Profile)

### 2.2 次级页面 (Level 2 Pages)
*   **适用范围**：除一级页面外的所有功能页面（含咨询室、知识库、统一服务中心内部页面）。
*   **头部 (Header)**：
    *   **左侧**：箭头返回按钮 (Back Arrow)，点击返回上一级。
    *   **中间**：当前页面标题（如“知识大厅”、“排班管理”）。
    *   **右侧**：可选操作（如“筛选”、“分享”）。
*   **底部**：无底部导航栏，内容区域全屏纵向滚动。

---

## 3. 页面结构清单

### 3.1 一级页面 (Tab Pages)

| 页面名称 | 相对路径 | 布局特征 | 核心功能 |
|---|---|---|---|
| **首页** | `/` | **双容器：暖心服务站 + 统一服务中心容器** | 1. **顶部**：Logo与“心青年”品牌展示。<br>2. **暖心服务站（对所有人可见）**：1+2 结构，包含：<br>   - **主入口 (1)**：[智能体咨询]（醒目、大卡片）<br>   - **副入口 (2)**：[查资料]、[找帮手]（并排小卡片）<br>3. **统一服务中心容器（仅对 Support 可见）**：以首页内嵌卡片/区块呈现旗下功能的快捷入口；不再作为独立的概览页面 `/workspace`，其子功能仍保留 `/workspace/*` 路径，点击首页卡片直接进入对应子页面或展开侧边容器/面板。 |
| **个人中心** | `/my` | 常规一级Header | 1. 个人资料/头像。<br>2. 家属功能：我的历史工单。<br>3. 系统动作：角色与认证信息展示（不再作为统一服务中心入口）。 |

### 3.2 次级页面：核心业务 (Client Features)
所有页面均通过首页入口跳转，带有返回头部。

| 页面名称 | 相对路径 | 父级入口 | 核心功能 |
|---|---|---|---|
| **RAG 智能咨询室** | `/consultation` | 首页-[智能体咨询] | AI 对话界面、展示流式回答、引用来源卡片、转人工入口。 |
| **知识库大厅** | `/knowledge` | 首页-[查资料] | 知识分类 Grid、搜索栏、热门文章列表。 |
| **知识详情页** | `/knowledge/:id` | 知识库大厅 | 文章详情阅读、关联推荐。 |
| **社区/专家墙** | `/community` | 首页-[找帮手] | 专家/志愿者列表（脱敏展示）、筛选器。 |
| **人员档案(公开)** | `/community/profile/:id` | 社区/专家墙 | 查看专家/志愿者详细履历（手机号脱敏）。 |
| **历史工单列表** | `/my/tickets` | 个人中心 | 家属查看自己发起的咨询工单状态与回复。 |
| **发起工单** | `/my/tickets/create` | 咨询室/个人中心 | 填写表单发起人工求助（当 AI 无法解决时）。 |
| **个人设置/资料** | `/my/settings` | 个人中心 | 修改资料、隐私开关(志愿者/专家)、切换状态。 |
| **登录** | `/auth/login` | 首页/个人中心 | 用户登录、忘记密码。 |
| **注册引导** | `/auth/register` | 登录页 | 角色选择（家属/志愿者/专家）。 |
| **注册表单** | `/auth/register/:role` | 注册引导 | 分角色的注册表单（专家需上传资质）。 |

### 3.3 次级页面：统一服务中心 (Service Center)
统一服务中心不再作为独立概览页，而是作为**首页内嵌容器**呈现（首页将展示统一服务中心卡片/区块，支持人员可见）。
其旗下功能仍以次级页面形式存在并保留 `/workspace/*` 路径，但不再暴露独立的 `/workspace` 概览页；首页卡片可直接跳转到对应子页面或展开侧边面板进行快速操作。
*建议：此类页面顶部返回按钮可逻辑判断，若从首页进入则返回首页 `/`，若在内部流转则返回上一页。*

| 模块         | 页面名称       | 相对路径                | 核心功能描述                                   | 角色权限         |
|--------------|---------------|------------------------|------------------------------------------------|------------------|
| **工作台**   | 工作台概览     | 首页容器内（无独立 `/workspace` 概览页） | Dashboard，待办、快捷入口、数据概览            | 全员(非家属)     |
| **知识管理** | 知识贡献       | `/workspace/contribute`| 录入新知识表单、文件上传、切片预览              | 志愿者/专家      |
| **知识管理** | 知识审核列表   | `/workspace/review`    | 待审核条目列表、筛选                            | 专家             |
| **知识管理** | 审核详情       | `/workspace/review/:id` | 查看提交内容、修订切片、驳回/发布操作           | 专家             |
| **任务/工单**| 任务大厅       | `/workspace/tasks`     | 浏览待认领的线上工单池、线下活动招募列表        | 志愿者/专家      |
| **任务/工单**| 工单详情/处理  | `/workspace/tickets/:id`| 回复工单、流转状态、查看家属诉求                | 志愿者/专家      |
| **任务/工单**| 排班/活动管理  | `/workspace/schedule`  | 志愿者报名排班、管理员发布班次、签到记录        | 志愿者/管理员    |
| **数据/记录**| 服务记录       | `/workspace/history`   | 志愿服务时长统计、工单历史记录                  | 志愿者           |
| **系统管理** | 人员管理       | `/admin/users`         | 注册审批列表（志愿者/专家）、人员列表、封禁/解封 | 管理员           |
| **系统管理** | 运维监控       | `/admin/logs`          | 系统错误日志、访问日志（隐私脱敏）              | 维护人员         |

---

## 4. 页面流转与交互关系

### 4.1 全局导航图 (Mermaid)

```mermaid
graph TD
    subgraph "一级页面 (Level 1)"
        Home[首页 /]
        User[个人中心 /my]
    end

    subgraph "认证流程 (Level 2)"
        Login[登录 /auth/login]
        Register[注册 /auth/register/*]
    end

    subgraph "次级页面：家属/核心功能 (Level 2)"
        Consult[智能体咨询 /consultation]
        KB[知识库 /knowledge]
        KBDetail[知识详情 /knowledge/:id]
        Experts[找帮手 /community]
        ExpertDetail[人员档案 /community/profile/:id]
        MyTickets[我的工单 /my/tickets]
        CreateTicket[发起工单 /my/tickets/create]
        MySettings[个人设置 /my/settings]
    end

    subgraph "次级页面：统一服务中心 (Level 2+)"
        ServiceContainer[统一服务中心容器(首页内嵌)]
        Contribution[知识贡献 /workspace/contribute]
        Review[知识审核列表 /workspace/review]
        ReviewDetail[审核详情 /workspace/review/:id]
        TaskBoard[任务大厅 /workspace/tasks]
        TicketHandle[工单处理 /workspace/tickets/:id]
        Schedule[排班管理 /workspace/schedule]
        History[服务记录 /workspace/history]
        AdminUser[人员管理 /admin/users]
        SysLogs[运维监控 /admin/logs]
    end

    %% Auth Flow
    Home -.-> Login
    User -.-> Login
    Login --> Register

    %% 首页流转
    Home -->|入口1: 咨询| Consult
    Home -->|入口2: 资料| KB
    KB --> KBDetail
    Home -->|入口3: 帮手| Experts
    Home -->|入口4: 统一服务中心容器| ServiceContainer
    Experts --> ExpertDetail

    %% 咨询流转
    Consult -.->|AI搞不定| CreateTicket

    %% 个人中心流转
    User -->|家属查看| MyTickets
    User --> MySettings

    %% 服务中心内部流转
    Workspace --> Contribution
    Workspace --> Review
    Review --> ReviewDetail
    Workspace --> TaskBoard
    TaskBoard --> TicketHandle
    Workspace --> Schedule
    Workspace --> History
    Workspace --> AdminUser
    Workspace --> SysLogs
```

### 4.2 首页具体布局 (Low-Fi)
```text
+-----------------------------------+
|  (No Top Bar)                     |
|                                   |
|        [Logo]                     |
|    “心青年”智能体平台             |
|                                   |
+-----------------------------------+
|  暖心服务站 (对所有人可见)         |
|  +-----------------------------+  |
|  |   [ 🤖 智能体咨询(大) ]     |  |
|  |   “点击开始对话...”         |  |
|  +-----------------------------+  |
|  +-------------+  +-------------+ |
|  | 📚 查资料   |  | 🤝 找帮手   | |
|  +-------------+  +-------------+ |
|                                   |
|  统一服务中心 (支持人员可见)       |
|  +-----------------------------+  |
|  |  工作台 / 快捷入口 / 待办列表  |  |
|  +-----------------------------+  |
|                                   |
| [首页(Active)]      [个人中心]    |
-----------------------------------+
```

### 4.3 交互细节

1.  **返回逻辑**：
    *   所有次级页面的左上角必须有 `<` 图标。
    *   点击 `<` 默认执行 `history.back()`。
    *   若用户直接通过 URL 访问次级页面（无历史栈），点击 `<` 应兜底跳转至首页 `/`。

2.  **服务中心鉴权**：
    *   在首页渲染“统一服务中心”区块时，系统需检查当前用户角色。
    *   若角色为 `Guest` 或 `Family`，不渲染“统一服务中心”区块。
    *   若角色为 `Support` (志愿者/专家/管理员)，在首页渲染醒目的服务中心卡片，点击进入 `/workspace` 系列页面。

3.  **沉浸式咨询**：
    *   `/consultation` 页面虽为次级页面，但建议隐藏部分非必要元素，给予对话框最大空间。
    *   键盘弹出时，需确保输入框不被遮挡（Viewport resize处理）。

---

## 5. 前端技术栈与规范 (Context)
*   **Framework**: React 18 + Vite
*   **Routing**: React Router v6
    *   使用 `Outlet` 布局模式区分 `HomeLayout` (带底部栏) 和 `SubLayout` (带顶部返回栏)。
*   **UI Library**: Ant Design Mobile / Vant (移动端优先) 或 Tailwind CSS 自定义。
*   **Icons**: 使用 Lucide-React 或 Ant Design Icons。
