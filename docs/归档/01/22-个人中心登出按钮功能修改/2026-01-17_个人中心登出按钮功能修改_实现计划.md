# 个人中心登出按钮功能修改 实现计划

## 版本记录

| 日期 | 版本 | 修改内容 | 修改原因 |
|---|---|---|---|
| 2026-01-17 | v1.0 | 初始计划 | 基于研究报告与澄清答复 |

## 关联研究
docs/tasks/罗问然/22-个人中心登出按钮功能修改/2026-01-17_个人中心登出按钮功能修改_研究报告.md

## 功能概述

优化个人中心登出按钮：
- 未登录时按钮隐藏。
- 已登录时按钮可用，点击弹出原生 window.confirm 确认框，确认后执行登出。
- 登出失败时使用 Toast 进行提示。
- 无需特殊移动端适配。

---

## Phase 1: 调整登出按钮可用性与样式

### 目标
- 已登录时按钮可点击，未登录时按钮隐藏。
- 按钮样式区分可用/不可用状态。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/LogoutButton.jsx|更新|根据 user 状态渲染按钮|
|src/pages/my/LogoutButton.css|更新|调整按钮样式|

### 具体变更
- 仅 user 存在时渲染按钮。
- 按钮样式调整为主色、可点击。

### 成功标准
- 自动验证：无 ESLint/编译错误。
- 手动验证：未登录时按钮不显示，已登录时按钮正常显示且可点击。

---

## Phase 2: 实现登出确认弹窗

### 目标
- 点击登出按钮弹出原生 window.confirm，确认后才执行登出。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/LogoutButton.jsx|更新|增加确认弹窗逻辑|

### 具体变更
- onClick 事件中调用 window.confirm，确认后执行 logout。

### 成功标准
- 自动验证：无 ESLint/编译错误。
- 手动验证：点击按钮弹窗确认，取消不登出，确认后登出。

---

## Phase 3: 登出失败 Toast 提示

### 目标
- 登出失败时，使用 Toast 组件提示用户。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/LogoutButton.jsx|更新|捕获 logout 异常并 Toast 提示|
|src/components/Toast/（如无则新建）|新增/复用|通用 Toast 组件|

### 具体变更
- logout 捕获异常，调用 Toast 显示错误。
- 若无 Toast 组件，需新建简单实现。

### 成功标准
- 自动验证：无 ESLint/编译错误。
- 手动验证：模拟登出失败时，页面出现 Toast 错误提示。

---

## Phase 4: 联调与验证

### 目标
- 全流程联调，确保交互与逻辑符合预期。

### 修改文件清单
|文件路径|修改类型|说明|
|---|---|---|
|src/pages/my/LogoutButton.jsx|联调|整体联调|
|src/components/Toast/|联调|Toast 效果联调|

### 具体变更
- 全流程手动测试。
- 如有自动化测试，补充用例。

### 成功标准
- 自动验证：通过相关自动化测试。
- 手动验证：所有交互与提示均符合需求。

---

## Commit message 模板

feat: 优化个人中心登出按钮，支持确认弹窗与失败 Toast 提示

## PR 描述要点
- 优化登出按钮可用性与样式
- 增加 window.confirm 确认弹窗
- 登出失败时 Toast 提示
- 兼容移动端，无特殊适配

