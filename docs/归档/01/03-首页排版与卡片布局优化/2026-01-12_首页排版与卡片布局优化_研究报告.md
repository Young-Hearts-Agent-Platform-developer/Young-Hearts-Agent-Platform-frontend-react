# 首页排版与卡片布局优化研究报告

## 版本记录

| 日期 | 版本 | 修改内容 | 修改原因 |
|---|---|---|---|
| 2026-01-12 | v1.1 | 更新问题描述 | 用户反馈窗口对齐与全屏问题 |
| 2026-01-12 | v1.0 | 初始分析 | 修复首页 UI/UX 问题 |

## 研究问题

根据用户反馈与截图，目前首页存在以下问题：
1.  **窗口对齐与覆盖问题**：目前窗口表现为向左对齐。具体在移动端情境下：
    *   **没有填充全屏**：屏幕四周存在明显空白。
    *   **没有居中对齐**：视觉重心偏左或未正确居中。
2.  **导航固定问题**：Header 和 BottomNav 随页面滚动，未固定在顶部/底部。
3.  **卡片样式问题**：卡片背景色缺失（透明或与背景混淆）。
4.  **卡片布局问题**：主卡片与副卡片并列时宽度不一致，视觉效果不佳。

## 发现摘要

通过代码分析，主要原因定位如下：
1.  **全屏问题**：`src/index.css` 中的 `body` 样式包含 `place-items: center`，且 `src/App.css` 中 `#root` 设置了 `padding: 2rem` 和 `max-width`，导致页面被限制在中间且有内边距。
2.  **导航固定**：`src/layouts/HomeLayout.jsx` 使用了 `min-height: 100vh` 导致页面整体滚动，而不是固定 Header/Footer 让中间区域滚动。
3.  **卡片背景**：`src/components/Card/index.css` 引用的 CSS 变量（如 `--yh-card-bg`）在 `src/styles/variables.css` 中未定义，导致样式失效回退。此外，页面整体背景色可能偏白，缺乏对比度。
4.  **布局对齐**：`src/pages/home/index.jsx` 中副卡片容器内的卡片缺乏 `flex: 1` 属性，无法自动填满剩余空间以对齐主卡片宽度。

## 相关文件清单

| 文件路径 | 作用说明 | 关键行号 |
|---|---|---|
| src/index.css | 全局重置样式 | L24-L29 (body样式) |
| src/App.css | 根节点样式 | L1-L6 (#root样式) |
| src/layouts/HomeLayout.jsx | 首页布局容器 | L12-L16 (Flex结构) |
| src/components/Card/index.css | 卡片样式 | L3-L15 (变量引用) |
| src/pages/home/index.jsx | 首页内容实现 | L63-L85 (卡片布局) |
| src/styles/variables.css | 样式变量定义 | 全文 |

## 当前实现分析

### 1. 窗口对齐与全屏覆盖
- **现状**：
  ```css
  /* src/index.css */
  body {
    display: flex;
    place-items: center; /* 导致内容试图垂直和水平居中，但可能导致左对齐偏移 */
    /* ... */
  }
  /* src/App.css */
  #root {
    padding: 2rem; /* 强制内边距，导致无法全屏 */
    /* ... */
  }
  ```
- **问题**：这些是 Vite 模板的默认样式，`place-items: center` 结合 flex 布局在移动端视口下可能导致内容块在未占满宽度时表现异常（如视觉上的向左对齐或非预期留白）。`padding: 2rem` 直接导致了“未填充全屏”的现象。
- **修复方向**：移除 `body` 的 `display: flex` 和 `place-items: center`，移除 `#root` 的 `padding` 和 `max-width` 限制，使其回归标准的移动端流式布局（Block layout）。

### 2. 导航固定
- **现状**：`HomeLayout` 的结构是 `Header` -> `main` -> `BottomNav`，且容器 `min-height: 100vh`。
- **问题**：当内容溢出时，整个浏览器窗口滚动，Header 滚出视野，BottomNav 沉底。
- **修复方向**：应将容器设为 `height: 100vh; overflow: hidden;`，并让 `main` 区域 `overflow-y: auto;`。

### 3. 卡片背景与变量
- **现状**：
  - Card CSS: `background: var(--yh-card-bg);`
  - Variables: 定义了 `--color-bg`, `--color-primary` 等，但**没有**定义 `--yh-card-bg`。
- **问题**：变量名不匹配导致样式全部失效。且首页背景色可能需要调整为淡灰色以突显白色卡片。

### 4. 布局对齐
- **现状**：主卡片宽度由父容器决定（block），副卡片在 flex 容器中，但宽度依赖内容或默认值。
- **修复方向**：给副卡片显式添加 `flex: 1`，确保两个副卡片平分宽度（减去 gap 后），从而总宽度与主卡片一致。

## 修复计划建议

### 步骤 1: 修正全局样式
修改 `src/index.css` 和 `src/App.css`，移除限制全屏的属性。

### 步骤 2: 调整布局组件
重构 `HomeLayout.jsx` 以支持“固定头尾 + 中间滚动”模式。

### 步骤 3: 统一 CSS 变量
在 `src/components/Card/index.css` 中修正变量引用，映射到 `src/styles/variables.css` 中已有的变量，或补充缺失变量。

### 步骤 4: 优化首页卡片布局
在 `src/pages/home/index.jsx` 中为副卡片添加样式支持。

## 风险与注意事项
- 修改全局 CSS (`index.css`) 可能会影响除首页外的其他页面（如登录页），需确认其他页面是否也需要全屏（通常是的）。
- 修改 CSS 变量名需谨慎，确保所有引用处都已更新。

## 待确认事项
- [ ] 确认是否需要暗色模式支持？目前 `variables.css` 似乎只定义了一套变量。
